<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Teil - Book Store Demo</title>
    <link rel="stylesheet" href="vendor/bulma.min.css">
  </head>

  <body>
    <div id="app" class="container">
      <div class="section">
        <div class="columns">
          <div class="column">
            <h2 class="title is-3">Add Author</h2>

            <form @submit.prevent="onAuthorSubmit">
              <div class="field">
                <input class="input" type="text" v-model="author.firstName" placeholder="First Name" />
              </div>
              <div class="field">
                <input class="input" type="text" v-model="author.lastName" placeholder="Last Name" />
              </div>
              <div class="field">
                <button type="submit" class="button is-primary is-fullwidth">Add</button>
              </div>
              <div class="notification is-danger" v-if="authorSubmitError.length !== 0">
                {{ authorSubmitError }}
              </div>
            </form>

            <hr/>

            <div>
              <h2 class="title is-3">Add Book</h2>

              <form @submit.prevent="onBookSubmit">
                <div class="field">
                  <input class="input" type="text" v-model="book.title" placeholder="Title" />
                </div>
                <div class="field">
                  <div class="control">
                    <div class="select is-fullwidth">
                      <select v-model="authorId">
                        <option disabled value="">Choose Author</option>
                        <option v-for="author in authors" v-bind:value="author._id">
                          {{author.firstName}} {{author.lastName}}
                        </option>
                      </select>
                    </div>
                  </div>
                </div>
                <div class="field">
                  <button type="submit" class="button is-primary is-fullwidth">Add</button>
                </div>
                <div class="notification is-danger" v-if="bookSubmitError.length !== 0">
                  {{ bookSubmitError }}
                </div>
              </form>
            </div>
          </div>

          <div class="column">
            <h2 class="title is-3">Authors</h2>

            <ul v-for="author in authors">
              <li>
                <h3 class="title is-4">
                  <span>{{author.firstName}} {{author.lastName}}</span>
                  <a href="#" @click.prevent="onDeleteAuthorClick(author)">Delete</a>
                </h3>

                <ul v-for="book in author.books">
                  <li>{{book.title}}</li>
                </ul>
              </li>
            </ul>
          </div>

          <div class="column">
            <h2 class="title is-3">Books</h2>

            <ul v-for="book in books">
              <li>
                <span class="name">{{book.title}}</span>
                <span>by {{book.author.firstName}} {{book.author.lastName}}</span>
                <a href="#" @click.prevent="onDeleteBookClick(book)">Delete</a>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <script src="vendor/vue.min.js"></script>
    <script src="vendor/axios.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
